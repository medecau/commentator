#!/usr/bin/python
# -*- coding: utf-8 -*-
from inspect import *
from pkgutil import *
import clint
from os import path
import os

def walkpkgs(p=None):
    '''
        walk the packages
    '''
    initial_dir=os.getcwd()
    pkgs=list()
    if not p:
        p='.'
    pabs=path.abspath(p)
    p_init = '%s/__init__.py' % p
    prefix=''
    base=path.basename(pabs)
    
    if path.exists(p_init) and path.isfile(p_init):
        os.chdir(path.dirname(pabs))
        root_importer = get_importer(base)
        prefix='%s.' % base
        pkgs.append((root_importer, path.basename(p), True))
    else:
        os.chdir(pabs)
    
    for pkg in walk_packages([base], prefix):
        pkgs.append(pkg)
    
    os.chdir(initial_dir)
    for pkg in pkgs:
        yield pkg

def doc(name):
    obj = __import__(name)
    return obj.__name__

def main(argv):
    for arg in clint.args.all:
        for pkg in walkpkgs(arg):
            print pkg

if __name__ == '__main__':
    import sys
    main(sys.argv)